import { useEffect, useRef, useState } from "react"

const ApologySection = () => {
  const [isVisible, setIsVisible] = useState(false);
  const sectionRef = useRef<HTMLElement>(null);

  useEffect(() => {
    const observer = new IntersectionObserver(
      ([entry]) => {
        if (entry.isIntersecting) {
          setIsVisible(true);
        }
      },
      { threshold: 0.3 }
    );

    if (sectionRef.current) {
      observer.observe(sectionRef.current);
    }

    return () => observer.disconnect();
  }, []);

  const lines = [
    "အချစ်ရေ",
    "အချစ်ဟာ ကိုယ့်ဘဝ ရဲ့ တစ်စိတ်တစ်ပိုင်းဆိုလည်းမမှားပါဘူး။",
    "ကိုယ့်ဟာ ရုပ်ရှင် ဇာတ်ကောင်အဖြစ်မြင်ကြည့်မယ်ဆို",
    "Ethernal Sunshine Of Spotless Mind ထဲကလို ဖြစ်မယ်ထင်တယ်။",
    "ကိုယ့်ဟာ Joel လို လူစားမျိုးဖြစ်ပြီး အချစ်ဟာ Clementine လို မိန်းကလေးမျိုး ဖြစ်မယ်ထင်တယ်။",
    "အချစ်နဲ့ မတွေ့ခင်အချိန်မှာ ကိုယ့်ဘဝဟာ အရာအားလုံးဟာ မရှိသလို ဖြစ်နေခဲ့တယ်။",
    "အချစ်နဲ့ တွေ့ပြီးနောက်ပိုင်းမှာပဲ ကိုယ့်ဘဝဟာ အမှောင်ထဲက အလင်းတန်းလို ဖြစ်လာခဲ့ပြီး",
    "ကိုယ်ဟာ ပြတ်သားတဲ့ ခံစားချက်တွေနဲ့ ပြည့်နှက်လာခဲ့သလို သေချာတဲ့ အနာဂတ် ကို ရှာဖွေလာချင်ခဲ့တယ်။",
    "အချစ်ရဲ့ အပြုံးက ကိုယ့်ရဲ့ နေ့တိုင်းကို အလှပဆုံးနေ့လို ဖြစ်စေခဲ့ပြီး",
    "အချစ်ရဲ့ အပြုံးတစ်ချက်က ကိုယ့်အတွက် ဥရောပတစ်ခွင်လုံးကို သိမ်းယူခဲ့တဲ့ နပိုလီယံကြီးရဲ့ အောင်မြင်မှုသဖွယ် ခံစားစေရတယ်။",
    "အချစ်ကို မေ့ဖို့ ကြိုးစားမယ်ခဲ့မယ်ဆိုရင်တောင်",
    "အချစ်ရဲ့ အမှတ်တရတွေက ကိုယ့်ရဲ့ နှလုံးသားထဲမှာ အမြဲတမ်း တည်ရှိနေပြီး",
    "ကိုယ့်ရဲ့ မသိစိတ်တွေဟာ အတင်းအကြပ်မေ့ဖို့ကြိုးစားနေခြင်းတွေကို ဆန့်ကျင်ပြီး ထွက်ပြေးပုန်းရှောင်မယ့်လူမျိုးပါ။",
    "အချစ်ကို အမြဲတမ်း ချစ်မယ်ဆိုတဲ့ လူမျိုးဖြစ်မယ်လို့ထင်တယ်",
    "အဆုံးသတ်မှာတောင် ကိုယ်လိုချင်တဲ့ နေရာက အချစ်အနားပါပဲ။",
    "ကိုယ်တို့တွေ ပြောဖူးခဲ့ သလို ပဲ အချစ် ပင်ပန်းတဲ့ အချိန် ကိုယ့်ဟာ ပြဿနာရှာမိရင် ကိုယ်တို့တွေ ဒီလိုကြဦးမှာဆိုပြီး",
    "ယခု ပြဿနာတွေက ကိုယ်တို့တွေ က အချိန်ကြာကြီး တူတူ ရှိခဲ့ပြီး ခုလို ခဏတာ ဝေးကွာနေကြရာက စတယ်လို့ ကိုယ်တော့ မြင်တယ် အချစ်ရေ",
    "ပြီးကိုယ်တို့တွေ ဒီလို နေရက်တွေကို ဖြတ်ကျော်နိုင်မယ်ဆိုတာလည်း ကိုယ် အပြည့်အဝ ယုံကြည်တယ်",
    "ဒါဟာ ကိုယ်တို့တွေ ရဲ့ ဘဝ စမ်းသပ်ချက်တွေ ဖြစ်ပြီး နောက်တစ်ဆင့်ရောက်ဖို့ အတွက် ဖြစ်တယ်လို့ ထင်တယ်",
    "ထို့အတွက်ကြောင့် ကိုယ်ဟာ လက်ရှိ ဖြစ်ခဲ့ သမျှကို သင်ခန်းစာ ယူရင်း အနာဂတ်မှာ ကောင်းမွန်တဲ့ လူတစ်ယောက်အဖြစ် ပြောင်းလဲကာ",
    "ကိုယ့်နဲ့ ပတ်သက်သမျှ အရာတွေ မှာ အချစ်ကို ပျော်ရွှင်စေရပြီး",
    "စိတ်လွတ် ကိုယ်လွတ်ရယ်မော နိုင်တဲ့ လူတစ်ယောက်အဖြစ်ထားချင်ပါတယ်။",
    "အချစ်ရဲ့ ဖြစ်ချင်တာတွေ ကို အနာဂတ်မှာ တူတူဖြည့်ဆည်းချင်တယ်",
    "မရေရာ တဲ့ အနာဂတ် တွေ မပေးပဲ သေချာတဲ့ အနာဂတ်တွေနဲ့ အတူအချစ်ရဲ့"
    + "လက်ကို ကိုင်ထားပြီး မနက်တိုင်းကို ထပ်ပြီး စတင်ခွင့်ပေးပါနော်လို့ပြောရင်း ကိုယ့်ကို ထပ်မံ ယုံကြည်စွာ အခွင့်အရေးလေးပေးစေချင်မိပါတယ်။"
  ];

  return (
    <section ref={sectionRef} className="min-h-screen flex items-center justify-center px-6 py-24">
      <div className="max-w-2xl mx-auto text-center">
        <div className="love-card">
          <div className="space-y-5">
            {lines.map((line, index) => (
              <p
                key={index}
                className={`font-display text-xl sm:text-xl md:text-xl text-foreground leading-relaxed transition-all duration-700 ${
                "opacity-100 translate-y-0"
                }`}
                style={{ transitionDelay: `${index * 200}ms` }}
              >
                {line}
              </p>
            ))}
          </div>
          
          <div className={`mt-10 flex justify-center transition-all duration-1000 delay-1000 ${isVisible ? "opacity-100 scale-100" : "opacity-0 scale-0"}`}>
            <div className="w-24 h-px bg-gradient-to-r from-transparent via-primary/50 to-transparent" />
          </div>
        </div>
      </div>
    </section>
  );
}

export default ApologySection;
